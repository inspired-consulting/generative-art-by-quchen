# Miscellaneous geometric operations

## Cutting lines

![](cut/1_line.svg)

## Line intersections

A line (more precisely a line segment) is defined by a start and end point.
Therefore, two lines can intersect in different ways:

### Real intersection

![](intersection/real.svg)

The two lines intersect fully.

### Virtual intersection inside one of the lines:

![](intersection/half_virtual.svg)

One the lines intersects with the infinite continuation of the other.

### Virtual intersection

![](intersection/virtual.svg)

Only the infinite continuations of the lines intersect.

### Parallel lines

![](intersection/parallel.svg)

Parallel or collinear lines do not have a unique intersection point.

Note that there may be edge cases where two lines are meant to be parallel, but are not recognized as such because of numerical instability. E.g. these two lines:

![](intersection/almost_parallel.svg)

```haskell
angledLine (Vec2 50 0) (rad (pi/6)) (Distance 80)
angledLine (Vec2 50 20) (rad (pi/6)) (Distance 80)
```

are obviously parallel, but still they have an intersection at (-2.1e17, -1.2e17).

## Mirroring

Mirror objects along a line.

![](mirror.svg)

Together with line intersections, this can be used to implement reflection; the
[billard process](../billard/README.md) is what you get when you do this
repeatedly.

![](reflection.svg)

## Cutting polygons

Cutting a square along a line is rather simple:

![](cut/2_square.svg)

Of course, we keep the original square if the line misses:

![](cut/4_miss.svg)

Cutting a more complex polygon along a line is more complicate, especially if
the polygon is not convex. Each time we cut across a branch, we need to start a
new polygon:

![](cut/3_complicated.svg)

Here's how exactly the cut works: We add new vertices, and two edges between the
new vertices. Then, we basically treat this edge graph as a directed graph, and
look for cycles. Each cycle in this edge graph is a resulting polygon.

This is how such an edge graph looks like (generated by hand):

![](cut/7_1_handcrafted_edge_graph.svg)

And here's a similar edge graph, as an intermediate result from cutting a
square:

![](cut/7_2_calculated_edge_graph.svg)

A nice and simple algorithm for a kind of shattering process is by randomly cutting a polygon in two pieces, and recursing for a number of steps.

![](cut/random_cut_square.svg)

![](cut/random_cut_haskell_logo.svg)


## Convex hull

The convex hull of a point set is the smallest polygon that contains all of the
points.

![](convex_hull.svg)
